# Monad

#### 2019/4/6

## 直观感觉

Monad是一个抽象的数学概念，不容易给出直观的准确描述。看了很多人对Monad的讲述，我认为，王垠对Lisp的评判的文章《函数式语言的宗教》中，用随机数生成函数的例子，说明无“状态”或“全局变量”的缺点，不能轻松表达random这样的”不纯函数“。

> 为了达到“纯函数”的目标，我们需要做很多“管道工”的工作，这增加了程序的复杂性和工作量。如果我们可以把种子存放在一个全局变量里，到需要的时候才去取，那就根本不需要把它传来传去的。除 random() 之外的代码，都不需要知道种子的存在。

> 为了减轻视觉负担和维护这些进进出出的“状态”，Haskell 引入了一种叫 monad 的概念。它的本质是使用类型系统的“重载”（overloading），把这些多出来的参数和返回值，掩盖在类型里面。

## Promise

## scheme的流和Monad

## 范畴论

> A monad is just a monoid in the category of endofunctors, what's the problem?
-- by James Iry

手头没有范畴论的数学书，摘录wiki。

### 群group

群(G,·)是由集合G和二元运算"·"构成的，符合以下四个性质（称“群公理”）的数学结构。其中，二元运算结合任何两个元素a和b而形成另一个元素，记为a·b，符号"·"是具体的运算，比如整数加法。

群公理所述的四个性质为：

1.	封闭性：	对于所有G中a, b，运算a·b的结果也在G中。b[›]
2.	结合律：	对于所有G中的a, b和c，等式 (a·b)·c = a· (b·c)成立。
3.	单位元：	存在G中的一个元素e，使得对于所有G中的元素a，总有等式
e·a = a·e = a 成立。

4.	逆元：	对于每个G中的a，存在G中的一个元素b使得总有a·b = b·a = e，此处e为单位元。
群运算的次序很重要，把元素a与元素b结合，所得到的结果不一定与把元素b与元素a结合相同；亦即， {\displaystyle a\cdot b=b\cdot a} a\cdot b=b\cdot a（交换律）不一定恒成立。满足交换律的群称为交换群（阿贝尔群，以尼尔斯·阿贝尔命名），不满足交换律的群称为非交换群（非阿贝尔群）。

整数加法群中，对于任何两个整数都有 a + b = b + a （加法的交换律）成立，因此，整数加法群是交换群。但是对称群中交换律并不总是成立，所以一般的对称群不是交换群。

群G的单位元经常记做1或 {\displaystyle 1_{G}} 1_{G}，这个记号来自乘法单位元。对于阿贝尔群，可以把群运算记做+，单位元记做0；这种情况下群称为加法群。单位元也可记做id。

群 {\displaystyle (G,\cdot )} {\displaystyle (G,\cdot )}也常常简记为 {\displaystyle G} G。可以根据上下文来判断一个符号指的是集合还是群。


例一：整数加法群
最常见的群之一是整数集 {\displaystyle \mathbb {Z} } \mathbb {Z} 和整数的加法所构成的群。它由以下数列组成：

..., −4, −3, −2, −1, 0, 1, 2, 3, 4, ...[4]
下面将整数的加法的性质与四个群公理做对比，可以看出，整数集和整数的加法是可以构成群的。

对于任何两个整数a和b，它们的和a + b也是整数。换句话说，在任何时候，把两个整数相加都能得出整数的结果。这个性质叫做在加法下封闭。
对于任何整数a, b和c，(a + b) + c = a +（b + c）。用话语来表达，先把a加到b，然后把它们的和加到c，所得到的结果与把a加到b与c的和是相等的。这个性质叫做结合律。
如果a是任何整数，那么0 + a = a + 0 = a。零叫做加法的单位元，因为把它加到任何整数都得到相同的整数。
对于任何整数a，存在另一个整数b使得a + b = b + a = 0。整数b叫做整数a的逆元，记为−a。

[群](https://zh.wikipedia.org/wiki/%E7%BE%A4#cite_note-3)

### 半群semigroup


### 幺半群monoid


### group/semigroup/monoid的命名

> 对乘法封闭的集合，就是 magma，汉译「原群」
乘法结合律的原群，就是 semigroup，汉译「半群」
带有单位元的半群，就是 monoid，汉译「幺半群」
带有逆元的幺半群，就是 group 群

> Mono- 幺 （源于希腊语的词缀）
-id 用于形成名词的后缀，无实义 （同样源于希腊语的后缀）

>Group 群 有4个性质 C.A.N.I.
C: Close 封闭性
A: Associative 连续性
N: Neutral (or Identity = Id) 幺元
I: Inverse 逆元
Semi-Group 半群 只有2个性质: C.A.
Monoid 么半群 : C.A. + N (= Id) => Mono + Id


知乎：

[为什么「群」和「半群」的英文是 group 和 semigroup，而「幺半群」却是 monoid](https://www.zhihu.com/question/37100637)

[数学中代数的有两个名词：环，半群，请问环为什么叫做环，它和汉字里的环（字典中的意思）有什么相同之处；同样，半群为什么叫做半群，这个”半“字是怎么解释呢？](https://www.zhihu.com/question/20564445)

## Monad典型种类与JavaScript实现

## React Hooks

## Monad缺点

Dijkstra语录：

> 程序的优雅性不是可以或缺的奢侈品，而是决定成功还是失败的一个要素。优雅并不是一个美学的问题，也不是一个时尚品味的问题，优雅能够被翻译成可行的技术。牛津字典对 elegant 的解释是：pleasingly ingenious and simple。如果你的程序真的优雅，那么它就会容易管理。第一是因为它比其它的方案都要短，第二是因为它的组件都可以被换成另外的方案而不会影响其它的部分。很奇怪的是，最优雅的程序往往也是最高效的。

> 我的母亲是一个优秀的数学家。有一次我问她几何难不难，她说一点也不难，只要你用“心”来理解所有的公式。如果你需要超过5行公式，那么你就走错路了。

> 为什么这么少的人追求优雅？这就是现实。如果说优雅也有缺点的话，那就是你需要艰巨的工作才能得到它，需要良好的教育才能欣赏它。

## 资料

SICP

- [函数式语言的宗教](http://www.yinwang.org/blog-cn/2013/03/31/purely-functional)

- [A Schemer's Introduction to Monads](http://www.ccs.neu.edu/home/dherman/research/tutorials/monads-for-schemers.txt)

- [陈年译稿——一个面向Scheme程序员的monad介绍](http://www.cnblogs.com/fzwudc/archive/2011/04/19/2020982.html)

- []()

- []()

- []()

- []()

- []()

- []()

## change log

- 2019/4/6 收集资料

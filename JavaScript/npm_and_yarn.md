# npm and yarn

## 调试npm模块

- 使用`yarn link`或者`npm link`。记住调试完成要`unlink`
- 配置webpack的`transform-imports`

## npm版本号

## semver

npm 中的模块版本都需要遵循 semver 2.0 的语义化版本规则。

> 版本格式：主版本号.次版本号.修订号，
> 版本号递增规则如下：
> 主版本号：当你做了不兼容的API 修改，
> 次版本号：当你做了向下兼容的功能性新增，
> 修订号：当你做了向下兼容的问题修正
> 先行版本号及版本编译信息可以加到“主版本号.次版本号.修订号”的后面，作为延伸。

### 举例

``` json
dependencies: {
  "connect-redis": "1.2.3"
  "debug": "*",
  "express-session": "~3.0.0",
  "express": "^1.0.0",
}
```

- `1.2.3`: 指定版本，锁死版本号。好处：不会因为依赖包更新导致问题；坏处：无法使用依赖包的更新
- `*`: 任意版本
- `^`: `>=1.0.0 && 2.0.0`，匹配`x.y.z`中的y
- `~`: `>=3.0.0 && <3.1.0`，匹配`x.y.z`中的z

### 版本策略

对于完全信任的包，可以使用`^`。对一般情况，使用`~`。

### 实际工程会遇到的问题

如果`package.json`使用了`^`和`~`，每个人在项目中执行install的时间不同，可能导致每个人安装依赖包不一样。为了保持一致，可以使用`package-lock.json`或`yarn.lock`。

公司内部项目可能会使用私有的源，可以配置`.npmrc`，避免每次手动输入私有源。

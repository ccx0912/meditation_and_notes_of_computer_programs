** 线程和进程
*** 服务器为何多使用多进程而非多线程？
见多进程优点
**** 多进程优点
更强的容错行，一个进程crash不会导致整个系统崩溃。
更好的多核可伸缩性，进程的使用将许多内核资源隔离，在多核系统上可伸缩性强于多线程程序
**** 多线程优点
创建速度快，数据共享（进程间共享数据麻烦）。由于线程间地址空间共享，通信比较简单，但考虑缓存一致性，性能上的优势并不大。
**** Linux中进程和线程
进程和线程在Linux内核实现都是Task（或者Thread）。不过同源多线程对应的Task共享的东西多一些（最主要是地址空间）。即使是多线程切换，页表也还是要切换的，只不过页表内容相同。
同样，多线程切换，TLB该刷也要刷。因为对于CPU来说，多线程和多进程一样，都有不同的标识和不同的上下文。为了保证一致性，TLB刷新不能省。
Linux中进程和线程的开销不一样，创建进程慢10倍。
